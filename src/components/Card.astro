---
// Card.astro - Reusable card component for Work and Posts
const {
  // Core props
  title,
  tag,
  excerpt,
  href = '#',
  image,
  // Backwards compatibility aliases used elsewhere in the codebase
  description,
  link,
  imageUrl,
  tags
} = Astro.props;

const imageSrc = image || imageUrl;
const hrefFinal = link || href;
const excerptText = excerpt || description;
---

<article class="card-container">
  {imageSrc && (
    <div class="card-image-container">
      <img src={imageSrc} alt={title} class="card-image" loading="lazy" />
    </div>
  )}
  <div class="card-content">
    {Array.isArray(tags) && tags.length > 0 ? (
      <div class="card-tags">
        {tags.map((t) => (
          <span class="card-tag">{t}</span>
        ))}
      </div>
    ) : (
      tag && <span class="card-tag">{tag}</span>
    )}
    <h3 class="card-title">
      <a href={hrefFinal} class="card-link">{title}</a>
    </h3>
    {excerptText && <p class="card-excerpt">{excerptText}</p>}
  </div>
</article>

<style>
  .card-container {
    display: block;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    transition: transform 0.2s, box-shadow 0.2s;
    height: 100%;
    background: var(--surface);
  }
  .card-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }
  .card-container:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  .card-image-container {
    height: 180px;
    overflow: hidden;
  }
  .card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }
  .card-container:hover .card-image {
    transform: scale(1.05);
  }
  .card-content { padding: 1.25rem; display: flex; flex-direction: column; gap: 0.6rem; }
  .card-tag { display: inline-block; padding: 0.25rem 0.6rem; background: #f5f7fb; border: 1px solid var(--border); border-radius: 999px; font-size: 0.78rem; align-self: flex-start; color: var(--primary); font-weight: 600; }
  .card-title {
    margin: 0;
    font-size: 1.25rem;
  }
  .card-link {
    color: inherit;
    text-decoration: none;
  }
  .card-link:hover {
    text-decoration: underline;
  }
  .card-excerpt { margin: 0; color: var(--muted); line-height: 1.6; }
</style>
