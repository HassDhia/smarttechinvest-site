---
// Nav.astro - Vertical navigation with icons
const currentPath = Astro.request.url?.pathname || '';
---

<nav class="nav-container">
  <ul class="nav-list">
    <li class="nav-item">
      <a href="/" class={currentPath === '/' ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        <span>Home</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/ventures" class={currentPath.startsWith('/ventures') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
        </svg>
        <span>Ventures</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/about" class={currentPath.startsWith('/about') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
        </svg>
        <span>About</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/work" class={currentPath.startsWith('/work') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
        </svg>
        <span>Work</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/blog" class={currentPath.startsWith('/blog') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
        </svg>
        <span>Blog</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/offers" class={currentPath.startsWith('/offers') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M3 13h8V3H3v10zm10 8h8V11h-8v10zM13 3v6h8V3h-8zM3 21h8v-6H3v6z"/>
        </svg>
        <span>Offers</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/diagnostic" class={currentPath.startsWith('/diagnostic') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M3 17h18v2H3v-2zm0-7h18v2H3V10zm0-7h18v2H3V3z"/>
        </svg>
        <span>Diagnostic</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/resources" class={currentPath.startsWith('/resources') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h10v2H4v-2z"/>
        </svg>
        <span>Resources</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="/schedule" class={currentPath.startsWith('/schedule') ? 'active' : ''}>
        <svg class="nav-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
        </svg>
        <span>Schedule</span>
      </a>
    </li>
  </ul>
  <div class="theme-toggle">
    <button id="theme-btn" onclick="window.__toggleTheme()" aria-label="Toggle theme">
      Toggle Theme
    </button>
  </div>
</nav>

<style>
  .nav-container { padding: 1rem; }
  .nav-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    list-style: none;
    padding: 0;
  }
  .nav-item a {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: inherit;
    padding: 0.6rem 0.8rem;
    border-radius: 10px;
  }
  .nav-item a:hover { background: rgba(0,0,0,0.05); }
  .nav-item a.active {
    background: rgba(15,37,68,0.08);
    font-weight: 600;
  }
  .nav-icon {
    fill: currentColor;
  }
  .theme-toggle { margin-top: 1rem; }
  #theme-btn { width: 100%; padding: 0.6rem 0.8rem; border-radius: 10px; border: 1px solid var(--border); background: var(--surface); cursor: pointer; }
</style>

<script>
  (function(){
    const saved = localStorage.getItem('theme');
    if(saved){
      document.documentElement.dataset.theme = saved;
    }
  })();
  window.__toggleTheme = function(){
    const current = document.documentElement.dataset.theme || 'light';
    const next = current === 'light' ? 'dark' : 'light';
    document.documentElement.dataset.theme = next;
    localStorage.setItem('theme', next);
  }
</script>
